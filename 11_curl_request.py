# Python script to run Curl with requests.
# We will use 'requests' module to make HTTP requests

# Import the necessary libraries

import requests
from datetime import datetime

def requests_get(url):
    try:
        # Make the GET request
        response = requests.get(url)
        response.raise_for_status() # raise an HTTP error for bad responses

        # Print the response content
        print(response.text)

        return response

    except requests.exceptions.RequestException as e:
        # Handle error if the request fails
        print(f"Error executing request: {e}")

def write_file(output_file, responses):
    with open(output_file, "a") as result_file:
        result_file.write("\nGET request result:\n")
        result_file.write("\n".join(str(response) for response in responses))

if __name__ == "__main__":
    # Target url
    target_url = "http://192.168.0.2"

    # File name
    output_file = "vulnerability_report.txt"

    # Time
    time = datetime.now()

    # Call the request_get function
    response = requests_get(target_url)
    write_file(output_file, response)

    # Print information
    print(f"GET Request saved to {output_file} at {time}")
